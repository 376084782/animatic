(function(){function t(t){var i=document.createElement("div").style,e=t[0].toUpperCase()+t.slice(1);return i.transform===void 0?u.filter(function(t){return i[t+e]!==void 0})[0]+e:t}function i(t,i){this.stylesheet=document.styleSheets[0],this.item=t,this.animations=i,this.total=this.animations.map(function(t){return t.delay+t.duration}).reduce(function(t,i){return t+i}),this.style()}function e(){this.handlers={}}function n(t,i,n,s,a){e.call(this),this.item=t,this.translate=i.translate&&i.translate.map(parseFloat),this.rotate=i.rotate&&i.rotate.map(parseFloat),this.scale=i.scale,this.opacity=i.opacity,this.start=null,this.diff=null,this.duration=parseInt(n||i.duration,10)||500,this.delay=parseInt(a||i.delay,10)||0,this.ease=b[s]||b[i.ease]||b.linear,this.easeName=s||"linear"}function s(t,i,s,a,r){e.call(this),this.item=t,this.animations=i.map(function(i){return new n(t,i.transform||{translate:i.translate,rotate:i.rotate,scale:i.scale},i.duration||s,i.ease||a,i.delay||r)}),this.start=null,this.delay=0,this.easeName=a||"linear",this.duration=Math.max.apply(null,this.animations.map(function(t){return t.duration+t.delay}))}function a(t){this.items=[],this._frame=null,t&&this.init()}function r(t){e.call(this),this.dom=t,this.animations=[],this.init()}var o=window.anima=window.a={};o.js=function(){return new a(!0)},o.css=function(){return new a};for(var u=["webkit","Moz","O","ms"],h=0,c=window.requestAnimationFrame,p=window.cancelAnimationFrame;!c&&u.length>h;){var m=u[h++].toLowerCase();c=window[m+"RequestAnimationFrame"],p=window[m+"CancelAnimationFrame"]||window[m+"CancelRequestAnimationFrame"]}m||(m=u[0]);var f=m?"-"+m+"-":"",l=t("transform"),y=t("animation"),d=t("transition"),b=function(){var t={quad:function(t){return Math.pow(t,2)},cubic:function(t){return Math.pow(t,3)},quart:function(t){return Math.pow(t,4)},quint:function(t){return Math.pow(t,5)},expo:function(t){return Math.pow(t,6)},sine:function(t){return 1-Math.cos(t*Math.PI/2)},circ:function(t){return 1-Math.sqrt(1-t*t)},back:function(t){return t*t*(3*t-2)}},i={linear:function(t){return t}};return Object.keys(t).forEach(function(e){var n=t[e];i["ease-in-"+e]=n,i["ease-out-"+e]=function(t){return 1-n(1-t)},i["ease-in-out-"+e]=function(t){return.5>t?n(2*t)/2:1-n(-2*t+2)/2}}),i.css={linear:"cubic-bezier(0.000, 0.000, 1.000, 1.000)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)","ease-in-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-out-sine":"cubic-bezier(0.445, 0.050, 0.550, 0.950)","ease-in-out-expo":"cubic-bezier(1.000, 0.000, 0.000, 1.000)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.150, 0.860)","ease-in-out-back":"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},i}();i.prototype.pause=function(){return this.item.dom.style[y+"PlayState"]="paused",this},i.prototype.resume=function(){return this.item.dom.style[y+"PlayState"]="running",this},i.prototype.stop=function(){var t=getComputedStyle(this.item.dom),i=t[f+"transform"],e=t.opacity;return this.item.dom.style[y]="",this.item.dom.style[d]="",this.item.dom.style[l]=i,this.item.dom.style.opacity=e,this.item.state=g.decompose(g.parse(i)),this.item.state.opacity=e,this},i.prototype.handle=function(t){var i=function(){this.stop(),this.item.dom.removeEventListener(m+t,i,!1)}.bind(this);this.item.dom.addEventListener(m+t,i,!1)},i.prototype.style=function(){var t="a"+Date.now()+"r"+Math.floor(1e3*Math.random());if(this.item.animations[0]instanceof n&&1==this.item.animations.length){var i=this.item.animations[0];i.init(),this.item.dom.style[d]="all "+i.duration+"ms "+b.css[i.easeName]+" "+i.delay+"ms",i.transform(1),this.handle("TransitionEnd"),this.item.style()}else this.stylesheet.insertRule(this.keyframes(t),0),this.handle("AnimationEnd"),this.item.dom.style[y]=t+" "+this.total+"ms"+(this.item.infinite?" infinite ":" ")+"forwards";this.item.animations=[]},i.prototype.keyframes=function(t){for(var i=0,e=["@"+f+"keyframes "+t+"{"],s=0;this.animations.length>s;s++){var a=this.animations[s],r=this.animations[s+1];if(a.init(),a instanceof n)0===s&&e.push(this.frame(0,b.css[a.easeName])),a.delay&&e.push(this.frame(i+=a.delay)),a.transform(1),e.push(this.frame(i+=a.duration,r&&b.css[r.easeName]));else{var o=[];a.animations.forEach(function(t){t.delay&&-1===o.indexOf(t.delay)&&o.push(t.delay),t.duration&&-1===o.indexOf(t.delay+t.duration)&&o.push(t.delay+t.duration)});for(var u=0;o.length>u;++u){for(var h=o[u],c=0;a.animations.length>c;++c){var p=a.animations[c];p.delay>=h||h>p.delay+p.duration||p.transform(p.ease((h-p.delay)/p.duration))}e.push(this.frame(i+=h))}}}return e.push("}"),e.join("")},i.prototype.percent=function(t){return(100*t/this.total).toFixed(3)},i.prototype.frame=function(t,i){var e=this.percent(t);return e+"% {"+(e?f+"transform:"+this.item.matrix()+";":"")+(e?"opacity:"+this.item.opacity()+";":"")+(i?f+"animation-timing-function:"+i+";":"")+"}"},e.prototype.on=function(t,i){return(this.handlers[t]=this.handlers[t]||[]).push(i),this},e.prototype.off=function(t,i){var e=this.handlers[t];return i?e.splice(e.indexOf(i),1):this.handlers[t]=[],this},e.prototype.emit=function(t){var i=Array.prototype.slice.call(arguments,1),e=this.handlers[t];if(e)for(var n=0;e.length>n;++n)e[n].apply(this,i);return this},n.prototype=new e,n.prototype.constructor=n,n.prototype.init=function(t,i){if(null===this.start||i){this.start=t;var e=this.item.state;this.initial={translate:e.translate.slice(),rotate:e.rotate.slice(),scale:e.scale.slice(),opacity:e.opacity},this.emit("start")}},n.prototype.animate=function(){return this.item.animate.apply(this.item,arguments)},n.prototype.css=function(){return this.item.css()},n.prototype.infinite=function(){return this.item.infinite=!0,this},n.prototype.run=function(t){if(!(t-this.start<this.delay)){var i=(t-this.delay-this.start)/this.duration;0>i&&(i=0),i=this.ease(i),this.transform(i)}},n.prototype.pause=function(){this.diff=Date.now()-this.start},n.prototype.resume=function(){this.start=Date.now()-this.diff},n.prototype.set=function(t,i){var e=this.item.state,n=this.initial;this[t]&&this[t].length?(this[t][0]&&(e[t][0]=n[t][0]+this[t][0]*i),this[t][1]&&(e[t][1]=n[t][1]+this[t][1]*i),this[t][2]&&(e[t][2]=n[t][2]+this[t][2]*i)):this[t]&&(e[t]=n[t]+(this[t]-n[t])*i)},n.prototype.transform=function(t){this.set("translate",t),this.set("rotate",t),this.set("scale",t),this.set("opacity",t)},n.prototype.end=function(t){!t&&this.transform(1),this.start=null,this.emit("end")},s.prototype=new e,s.prototype.constructor=s,s.prototype.init=function(t){if(null===this.start){this.start=t;for(var i=0;this.animations.length>i;++i)this.animations[i].init(t);this.emit("start")}},s.prototype.animate=function(){return this.item.animate.apply(this.item,arguments)},s.prototype.css=function(){return this.item.css()},s.prototype.infinite=function(){return this.item.infinite=!0,this},s.prototype.run=function(t){for(var i=0;this.animations.length>i;++i){var e=this.animations[i];t>=e.start+e.delay+e.duration?(this.animations.splice(i--,1),e.end()):e.run(t)}},s.prototype.pause=function(){for(var t=0;this.animations.length>t;++t)this.animations[t].pause()},s.prototype.resume=function(){for(var t=0;this.animations.length>t;++t)this.animations[t].resume()},s.prototype.end=function(t){for(var i=0;this.animations.length>i;++i)this.animations[i].end(t);this.emit("end")},a.prototype.init=function(){function t(e){i._frame=c(t),i.update(e)}var i=this;this._frame=c(t)},a.prototype.add=function(t){var i=new r(t);return this.items.push(i),i},a.prototype.cancel=function(){this._frame&&p(this._frame)},a.prototype.stop=function(){this.cancel();for(var t=0;this.items.length>t;++t)this.items[t].stop()},a.prototype.pause=function(){this.cancel();for(var t=0;this.items.length>t;++t)this.items[t].pause()},a.prototype.resume=function(){for(var t=0;this.items.length>t;++t)this.items[t].resume();this.init()},a.prototype.update=function(t){for(var i=0;this.items.length>i;++i)this.items[i].update(t)},a.prototype.on=function(t,i){addEventListener(t,i,!0)};var v=Math.PI/180,g={id:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},multiply:function w(t,i){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1];return e[0]=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],e[1]=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],e[2]=t[0]*i[2]+t[1]*i[6]+t[2]*i[10],e[4]=t[4]*i[0]+t[5]*i[4]+t[6]*i[8],e[5]=t[4]*i[1]+t[5]*i[5]+t[6]*i[9],e[6]=t[4]*i[2]+t[5]*i[6]+t[6]*i[10],e[8]=t[8]*i[0]+t[9]*i[4]+t[10]*i[8],e[9]=t[8]*i[1]+t[9]*i[5]+t[10]*i[9],e[10]=t[8]*i[2]+t[9]*i[6]+t[10]*i[10],e[12]=t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+i[12],e[13]=t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+i[13],e[14]=t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+i[14],2>=arguments.length?e:w.apply(null,[e].concat(Array.prototype.slice.call(arguments,2)))},translate:function(t,i,e){return t||i||e?(t||(t=0),i||(i=0),e||(e=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1]):g.id()},scale:function(t,i,e){return t||i||e?(t||(t=1),i||(i=1),e||(e=1),[t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1]):g.id()},rotate:function(t,i,e){if(!(t||i||e))return g.id();t||(t=0),i||(i=0),e||(e=0),t*=v,i*=v,e*=v;var n=Math.sin(t),s=Math.cos(t),a=Math.sin(i),r=Math.cos(i),o=Math.sin(e),u=Math.cos(e);return[r*u,s*o+n*a*u,n*o-s*a*u,0,-r*o,s*u-n*a*o,n*u+s*a*o,0,a,-n*r,s*r,0,0,0,0,1]},rotate3d:function(t,i,e,n){n||(n=0),n*=v;var s=Math.sin(n),a=Math.cos(n),r=Math.sqrt(t*t+i*i+e*e);0===r?(t=0,i=0,e=1):1!==r&&(t/=r,i/=r,e/=r);var o=t*t,u=i*i,h=e*e,c=1-a;return[o+(1-o)*a,t*i*c+e*s,t*e*c-i*s,0,t*i*c-e*s,u+(1-u)*a,i*e*c+t*s,0,t*e*c+i*s,i*e*c-t*s,h+(1-h)*a,0,0,0,0,1]},skew:function(t,i){return t||i?(t||(t=0),i||(i=0),t*=v,i*=v,[1,Math.tan(i),0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]):g.id()},perspective:function(t){return t=-1/t,[1,0,0,0,0,1,0,0,0,0,1,t,0,0,0,1]},parse:function(t){var i=t.match(/\((.+)\)/)[1].split(/,\s?/);return 6===i.length&&(i.splice(2,0,"0","0"),i.splice(6,0,"0","0"),i.splice(8,0,"0","0","1","0"),i.push("0","1")),i},inverse:function(t){var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],e=t[5]*t[10]-t[6]*t[9],n=t[1]*t[10]-t[2]*t[9],s=t[1]*t[6]-t[2]*t[5],a=t[4]*t[10]-t[6]*t[8],r=t[0]*t[10]-t[2]*t[8],o=t[0]*t[6]-t[2]*t[4],u=t[4]*t[9]-t[5]*t[8],h=t[0]*t[9]-t[1]*t[8],c=t[0]*t[5]-t[1]*t[4],p=1/(t[0]*e-t[1]*a+t[2]*u);return i[0]=p*e,i[1]=-p*n,i[2]=p*s,i[4]=-p*a,i[5]=p*r,i[6]=-p*o,i[8]=p*u,i[9]=-p*h,i[10]=p*c,i[12]=-t[12]*i[0]-t[13]*i[4]-t[14]*i[8],i[13]=-t[12]*i[1]-t[13]*i[5]-t[14]*i[9],i[14]=-t[12]*i[2]-t[13]*i[6]-t[14]*i[10],i},compose:function(t,i,e){t||(t=[]),i||(i=[]),e||(e=[]);var n=g.translate(t[0],t[1],t[2]),s=g.rotate(i[0],i[1],i[2]),a=g.scale(e[0],e[1],e[2]);return g.multiply(a,s,n)},decompose:function(t){var i=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),e=Math.sqrt(t[4]*t[4]+t[5]*t[5]+t[6]*t[6]),n=Math.sqrt(t[8]*t[8]+t[9]*t[9]+t[10]*t[10]),s=Math.atan2(-t[9]/n,t[10]/n)/v,a=Math.asin(t[8]/n)/v,r=Math.atan2(-t[4]/e,t[0]/i)/v;(1===t[4]||-1===t[4])&&(s=0,a=t[4]*-Math.PI/2,r=t[4]*Math.atan2(t[6]/e,t[5]/e)/v);var o=t[12]/i,u=t[13]/i,h=t[14]/i;return{translate:[o,u,h],rotate:[s,a,r],scale:[i,e,n]}},stringify:function(t){for(var i=0;t.length>i;++i)1e-6>Math.abs(t[i])&&(t[i]=0);return"matrix3d("+t.join()+")"},toTestString:function(t){function i(t){return t.toFixed(6)}function e(t){return 0===t[2]&&0===t[3]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[14]&&1===t[15]}function n(t,i){return-1!==[0,1,4,5,12,13].indexOf(i)}return e(t)?"matrix("+t.filter(n).map(i).join(", ")+")":"matrix3d("+t.map(i).join(", ")+")"}};r.prototype=new e,r.prototype.constructor=r,r.prototype.init=function(){this.infinite=!1,this.running=!0,this.state={translate:[0,0,0],rotate:[0,0,0],scale:[1,1,1],opacity:1}},r.prototype.update=function(t){this.animation(t),this.style()},r.prototype.pause=function(){this.running&&(this.animations.length&&this.animations[0].pause(),this.running=!1)},r.prototype.resume=function(){this.running||(this.animations.length&&this.animations[0].resume(),this.running=!0)},r.prototype.style=function(){this.dom.style[l]=this.matrix(),this.dom.style.opacity=this.opacity()},r.prototype.matrix=function(){var t=this.state;return g.stringify(g.compose(t.translate,t.rotate,t.scale))},r.prototype.center=function(){var t=this.state;return g.decompose(g.inverse(g.compose(t.translate,t.rotate,t.scale)))},r.prototype.opacity=function(){return this.state.opacity},r.prototype.add=function(t,i){return this.state[t][0]+=i[0],this.state[t][1]+=i[1],this.state[t][2]+=i[2],this},r.prototype.set=function(t,i){return this.state[t]=i,this},r.prototype.translate=function(t){return this.add("translate",t)},r.prototype.rotate=function(t){return this.add("rotate",t)},r.prototype.scale=function(t){return this.add("scale",t)},r.prototype.clear=function(){this.state.translate=[0,0,0],this.state.rotate=[0,0,0],this.state.scale=[1,1,1],this.state.opacity=1},r.prototype.animate=function(t,i,e,a){var r=Array.isArray(t)?s:n,o=new r(this,t,i,e,a);return this.animations.push(o),o},r.prototype.animation=function(t){if(this.running&&0!==this.animations.length)for(;0!==this.animations.length;){var i=this.animations[0];i.init(t);{if(!(t>=i.start+i.delay+i.duration)){i.run(t);break}this.infinite&&this.animations.push(i),this.animations.shift(),i.end()}}},r.prototype.finish=function(t){if(0===this.animations.length)return this;for(var i=0;this.animations.length>i;++i){var e=this.animations[i];e.end(t)}return this.animations=[],this.infinite=!1,this},r.prototype.stop=function(){return this.finish(!0)},r.prototype.css=function(){return new i(this,this.animations)}})();
//@ sourceMappingURL=anima.min.js.map