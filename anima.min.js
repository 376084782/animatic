(function(){function t(t){var i=document.createElement("div").style,n=t[0].toUpperCase()+t.slice(1);return void 0===i.transform?p.filter(function(t){return void 0!==i[t+n]})[0]+n:t}function i(t,i,n){!document.styleSheets.length&&this.createStyleSheet(),this.stylesheet=document.styleSheets[0],this.item=t,this.runner=t.runner,this.animations=i,this.total=this.runner.duration,!n&&this.style()}function n(){this.handlers={}}function e(t,i,e,r,s){n.call(this),this.item=t,this.translate=i.translate&&i.translate.map(parseFloat),this.rotate=i.rotate&&i.rotate.map(parseFloat),this.scale=i.scale,this.opacity=i.opacity,this.start=null,this.diff=null,this.duration=0|(i.duration||e),this.delay=0|(i.delay||s),this.ease=w[i.ease]||w[r]||w.linear,this.easeName=r||"linear"}function r(t){n.call(this),this.start=null,this.item=t,this.delay=0,this.duration=0,this.easeName="linear",this.animations=[]}function s(t){r.call(this,t)}function a(t){r.call(this,t),this._infinite=!1}function o(t){n.call(this),this.items=[],this.frame=null,t&&this.init()}function u(){o.call(this,!0),this.currentTime=0,this.start=0}function h(t){n.call(this),this.dom=t,this.init()}var c=window.anima=window.a={};c.js=function(){return new o(!0)},c.css=function(){return new o},c.timeline=function(){return new u};for(var p=["webkit","Moz","O","ms"],f=0,l=window.requestAnimationFrame,m=window.cancelAnimationFrame;!l&&p.length>f;){var y=p[f++].toLowerCase();l=window[y+"RequestAnimationFrame"],m=window[y+"CancelAnimationFrame"]||window[y+"CancelRequestAnimationFrame"]}window.chrome&&!y&&(y=p[0]);var d=y?"-"+y+"-":"",v=t("transform"),b=t("animation"),g=t("transition"),w=function(){var t={quad:function(t){return Math.pow(t,2)},cubic:function(t){return Math.pow(t,3)},quart:function(t){return Math.pow(t,4)},quint:function(t){return Math.pow(t,5)},expo:function(t){return Math.pow(t,6)},sine:function(t){return 1-Math.cos(t*Math.PI/2)},circ:function(t){return 1-Math.sqrt(1-t*t)},back:function(t){return t*t*(3*t-2)}},i={linear:function(t){return t}};return Object.keys(t).forEach(function(n){var e=t[n];i["ease-in-"+n]=e,i["ease-out-"+n]=function(t){return 1-e(1-t)},i["ease-in-out-"+n]=function(t){return.5>t?e(2*t)/2:1-e(-2*t+2)/2}}),i.css={linear:"cubic-bezier(0.000, 0.000, 1.000, 1.000)","ease-in-quad":"cubic-bezier(0.550, 0.085, 0.680, 0.530)","ease-in-cubic":"cubic-bezier(0.550, 0.055, 0.675, 0.190)","ease-in-quart":"cubic-bezier(0.895, 0.030, 0.685, 0.220)","ease-in-quint":"cubic-bezier(0.755, 0.050, 0.855, 0.060)","ease-in-sine":"cubic-bezier(0.470, 0.000, 0.745, 0.715)","ease-in-expo":"cubic-bezier(0.950, 0.050, 0.795, 0.035)","ease-in-circ":"cubic-bezier(0.600, 0.040, 0.980, 0.335)","ease-in-back":"cubic-bezier(0.600, -0.280, 0.735, 0.045)","ease-out-quad":"cubic-bezier(0.250, 0.460, 0.450, 0.940)","ease-out-cubic":"cubic-bezier(0.215, 0.610, 0.355, 1.000)","ease-out-quart":"cubic-bezier(0.165, 0.840, 0.440, 1.000)","ease-out-quint":"cubic-bezier(0.230, 1.000, 0.320, 1.000)","ease-out-sine":"cubic-bezier(0.390, 0.575, 0.565, 1.000)","ease-out-expo":"cubic-bezier(0.190, 1.000, 0.220, 1.000)","ease-out-circ":"cubic-bezier(0.075, 0.820, 0.165, 1.000)","ease-out-back":"cubic-bezier(0.175, 0.885, 0.320, 1.275)","ease-in-out-quad":"cubic-bezier(0.455, 0.030, 0.515, 0.955)","ease-in-out-cubic":"cubic-bezier(0.645, 0.045, 0.355, 1.000)","ease-in-out-quart":"cubic-bezier(0.770, 0.000, 0.175, 1.000)","ease-in-out-quint":"cubic-bezier(0.860, 0.000, 0.070, 1.000)","ease-in-out-sine":"cubic-bezier(0.445, 0.050, 0.550, 0.950)","ease-in-out-expo":"cubic-bezier(1.000, 0.000, 0.000, 1.000)","ease-in-out-circ":"cubic-bezier(0.785, 0.135, 0.150, 0.860)","ease-in-out-back":"cubic-bezier(0.680, -0.550, 0.265, 1.550)"},i}();i.prototype.createStyleSheet=function(){var t=document.createElement("style");document.getElementsByTagName("head")[0].appendChild(t)},i.prototype.pause=function(){return this.item.dom.style[b+"PlayState"]="paused",this},i.prototype.resume=function(){return this.item.dom.style[b+"PlayState"]="running",this},i.prototype.stop=function(){var t=getComputedStyle(this.item.dom),i=t[v],n=t.opacity,e=this.item.dom.style;return e[b]="",e[g]="",this.item.state=A.decompose(A.parse(i)),this.item.state.opacity=n,this.item.style(),this},i.prototype.handle=function(t){var i=function(){this.stop(),this.item.dom.removeEventListener(y+t,i,!1)}.bind(this);this.item.dom.addEventListener(y+t,i,!1)},i.prototype.style=function(){var t="a"+Date.now()+"r"+Math.floor(1e3*Math.random());if(this.runner.animations[0]instanceof e&&1==this.runner.animations.length){var i=this.runner.animations[0];i.init(),this.item.dom.style[g]=i.duration+"ms"+" "+w.css[i.easeName]+" "+i.delay+"ms",i.transform(1),this.handle("TransitionEnd"),this.item.style()}else this.stylesheet.insertRule(this.keyframes(t),0),this.handle("AnimationEnd"),this.item.dom.style[b]=t+" "+this.total+"ms"+" "+(this.runner._infinite?"infinite":"")+" "+"forwards";this.runner.animations=[]},i.prototype.keyframes=function(t){for(var i=0,n=["@"+d+"keyframes "+t+"{"],r=0;this.runner.animations.length>r;++r){var s=this.runner.animations[r],a=this.runner.animations[r+1];if(s.init(),s instanceof e)0===r&&n.push(this.frame(0,w.css[s.easeName])),s.delay&&n.push(this.frame(i+=s.delay)),s.transform(1),n.push(this.frame(i+=s.duration,a&&w.css[a.easeName]));else{var o=[];s.animations.forEach(function(t){t.delay&&-1===o.indexOf(t.delay)&&o.push(t.delay),t.duration&&-1===o.indexOf(t.delay+t.duration)&&o.push(t.delay+t.duration)}),o=o.sort(function(t,i){return t-i});for(var u=0;o.length>u;++u){for(var h=o[u],c=0;s.animations.length>c;++c){var p=s.animations[c];p.delay>=h||h>p.delay+p.duration||p.transform(p.ease((h-p.delay)/p.duration))}n.push(this.frame(i+=h))}}}return n.push("}"),n.join("")},i.prototype.percent=function(t){return(100*t/this.total).toFixed(3)},i.prototype.frame=function(t,i){var n=this.percent(t);return n+"% {"+(n?d+"transform:"+this.item.transform()+";":"")+(n?"opacity:"+this.item.opacity()+";":"")+(i?d+"animation-timing-function:"+i+";":"")+"}"},n.prototype.on=function(t,i){return(this.handlers[t]=this.handlers[t]||[]).push(i),this},n.prototype.off=function(t,i){var n=this.handlers[t];return i?n.splice(n.indexOf(i),1):this.handlers[t]=null,this},n.prototype.emit=function(t){var i=Array.prototype.slice.call(arguments,1),n=this.handlers[t];if(n)for(var e=0;n.length>e;++e)n[e].apply(this,i);return this},e.prototype=new n,e.prototype.constructor=e,e.prototype.init=function(t,i){if(null===this.start||i){this.start=t+this.delay;var n=this.item.state;this.initial={translate:n.translate.slice(),rotate:n.rotate.slice(),scale:n.scale.slice(),opacity:n.opacity},this.emit("start")}},e.prototype.animate=function(){return this.item.animate.apply(this.item,arguments)},e.prototype.css=function(){return this.item.css()},e.prototype.infinite=function(){return this.item.infinite=!0,this},e.prototype.run=function(t){if(!(this.start>t)){var i=(t-this.start)/this.duration;i=this.ease(i),this.transform(i)}},e.prototype.pause=function(){this.diff=Date.now()-this.start},e.prototype.resume=function(){this.start=Date.now()-this.diff},e.prototype.set=function(t,i){var n=this.item.state,e=this.initial;if(Array.isArray(this[t]))for(var r=0;3>r;++r)this[t][r]&&(n[t][r]=e[t][r]+this[t][r]*i);else void 0!==this[t]&&(n[t]=e[t]+(this[t]-e[t])*i)},e.prototype.transform=function(t){this.set("translate",t),this.set("rotate",t),this.set("scale",t),this.set("opacity",t)},e.prototype.end=function(t){!t&&this.transform(1),this.start=null,this.emit("end")},r.prototype=new n,r.prototype.add=function(t,i,n,o){function u(t,e){var r=new a(t);return e.forEach(function(t){r.add(t,i,n,o)}),r}function h(t,e){var r=new s(t);return e.forEach(function(e){Array.isArray(e)?r.add(u(t,e)):r.add(e,i,n,o)}),r}var c;c=t instanceof r?t:Array.isArray(t)?h(this.item,t):new e(this.item,t,i,n,o),this.animations.push(c);var i=this.animations.map(function(t){return t.duration+t.delay});this.duration=this instanceof s?Math.max.apply(null,i):i.reduce(function(t,i){return t+i},0)},r.prototype.animate=function(){return this.item.animate.apply(this.item,arguments)},r.prototype.css=function(){return this.item.css()},s.prototype=new r,s.prototype.constructor=s,s.prototype.all=function(t){for(var i=Array.prototype.slice.call(arguments,1),n=0;this.animations.length>n;++n){var e=this.animations[n];e[t].apply(e,i)}},s.prototype.init=function(t,i){(null===this.start||i)&&(this.start=t,this.all("init",t,i),this.emit("start"))},s.prototype.run=function(t){for(var i=0;this.animations.length>i;++i){var n=this.animations[i];t>=n.start+n.duration?(this.animations.splice(i--,1),n.end()):n.run(t)}},s.prototype.seek=function(t){this.run(t)},s.prototype.pause=function(){this.all("pause")},s.prototype.resume=function(){this.all("resume")},s.prototype.end=function(t){this.all("end",t),this.emit("end")},a.prototype=new r,a.prototype.constructor=a,a.prototype.init=function(t,i){(null===this.start||i)&&(this.start=t,this.animations[0].init(t,i),this.emit("start"))},a.prototype.run=function(t){for(;0!==this.animations.length;){var i=this.animations[0];i.init(t);{if(!(t>=i.start+i.duration)){i.run(t);break}this._infinite&&this.animations.push(i),this.animations.shift(),i.end()}}},a.prototype.seek=function(t){if(0!==this.animations.length)for(var i=0,n=0;this.animations.length>n;++n){var e=this.animations[n];e.init(i,!0);{if(!(t>=e.start+e.duration)){e.run(t);break}e.end(),i+=e.delay+e.duration}}},a.prototype.infinite=function(){return this._infinite=!0,this},a.prototype.pause=function(){this.animations.length&&this.animations[0].pause()},a.prototype.resume=function(){this.animations.length&&this.animations[0].resume()},a.prototype.end=function(t){for(var i=0;this.animations.length>i;++i)this.animations[i].end(t);this.animations=[],this._infinite=!1,this.emit("end")},o.prototype=new n,o.prototype.constructor=o,o.prototype.init=function(){function t(n){i.update(n),i.frame=l(t)}var i=this;this.frame=l(t)},o.prototype.update=function(t){for(var i=0;this.items.length>i;++i)this.items[i].update(t)},o.prototype.add=function(t){var i=new h(t);return this.items.push(i),i},o.prototype.cancel=function(){this.frame&&m(this.frame),this.frame=0},o.prototype.stop=function(){this.cancel();for(var t=0;this.items.length>t;++t)this.items[t].stop()},o.prototype.pause=function(){this.cancel();for(var t=0;this.items.length>t;++t)this.items[t].pause()},o.prototype.resume=function(){for(var t=0;this.items.length>t;++t)this.items[t].resume();this.init()},u.prototype=new o,u.prototype.constructor=u,u.prototype.init=function(){function t(n){i.running&&(i.currentTime=n-i.start),i.update(i.currentTime),i.frame=l(t)}this.frame=l(t);var i=this},u.prototype.update=function(t){for(var i=0;this.items.length>i;++i)this.changed||this.running?(this.items[i].timeline(t),this.changed=!1,this.emit("update",t)):this.items[i].style()},u.prototype.play=function(){this.running=!0,this.start=Date.now()-this.currentTime},u.prototype.pause=function(){this.running=!1},u.prototype.stop=function(){this.currentTime=0,this.running=!1},u.prototype.seek=function(t){this.changed=!0,this.currentTime=t};var M={set:function(t,i,n){return[t,i,n]},length:function(t,i,n){return Array.isArray(t)&&(i=t[1],n=t[2],t=t[0]),Math.sqrt(t*t+i*i+n*n)},add:function(t,i){return[t[0]+i[0],t[1]+i[1],t[2]+i[2]]},sub:function(t,i){return[t[0]-i[0],t[1]-i[1],t[2]-i[2]]},norm:function(t,i,n){Array.isArray(t)&&(i=t[1],n=t[2],t=t[0]);var e=this.length(t,i,n);return 0!==e?(t/=e,i/=e,n/=e):(t=0,i=0,n=0),[t,i,n]},cross:function(t,i){var n=t[1]*i[2]-t[2]*i[1],e=t[2]*i[0]-t[0]*i[2],r=t[1]*i[1]-t[1]*i[0];return[n,e,r]},copy:function(t){return[t[0],t[1],t[2]]}},z=Math.PI/180,A={identity:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},multiply:function k(t,i){var n=this.identity();return n[0]=t[0]*i[0]+t[1]*i[4]+t[2]*i[8],n[1]=t[0]*i[1]+t[1]*i[5]+t[2]*i[9],n[2]=t[0]*i[2]+t[1]*i[6]+t[2]*i[10],n[4]=t[4]*i[0]+t[5]*i[4]+t[6]*i[8],n[5]=t[4]*i[1]+t[5]*i[5]+t[6]*i[9],n[6]=t[4]*i[2]+t[5]*i[6]+t[6]*i[10],n[8]=t[8]*i[0]+t[9]*i[4]+t[10]*i[8],n[9]=t[8]*i[1]+t[9]*i[5]+t[10]*i[9],n[10]=t[8]*i[2]+t[9]*i[6]+t[10]*i[10],n[12]=t[12]*i[0]+t[13]*i[4]+t[14]*i[8]+i[12],n[13]=t[12]*i[1]+t[13]*i[5]+t[14]*i[9]+i[13],n[14]=t[12]*i[2]+t[13]*i[6]+t[14]*i[10]+i[14],2>=arguments.length?n:k.apply(this,[n].concat(Array.prototype.slice.call(arguments,2)))},translate:function(t,i,n){return t||i||n?(t||(t=0),i||(i=0),n||(n=0),[1,0,0,0,0,1,0,0,0,0,1,0,t,i,n,1]):this.identity()},scale:function(t,i,n){return t||i||n?(t||(t=1),i||(i=1),n||(n=1),[t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1]):this.identity()},rotate:function(t,i,n){if(!(t||i||n))return this.identity();t||(t=0),i||(i=0),n||(n=0),t*=z,i*=z,n*=z;var e=Math.sin(t),r=Math.cos(t),s=Math.sin(i),a=Math.cos(i),o=Math.sin(n),u=Math.cos(n);return[a*u,r*o+e*s*u,e*o-r*s*u,0,-a*o,r*u-e*s*o,e*u+r*s*o,0,s,-e*a,r*a,0,0,0,0,1]},rotate3d:function(t,i,n,e){e||(e=0),e*=z;var r=Math.sin(e),s=Math.cos(e),a=M.norm(t,i,n);t=a[0],i=a[1],n=a[2];var o=t*t,u=i*i,h=n*n,c=1-s;return[o+(1-o)*s,t*i*c+n*r,t*n*c-i*r,0,t*i*c-n*r,u+(1-u)*s,i*n*c+t*r,0,t*n*c+i*r,i*n*c-t*r,h+(1-h)*s,0,0,0,0,1]},skew:function(t,i){return t||i?(t||(t=0),i||(i=0),t*=z,i*=z,[1,Math.tan(i),0,0,Math.tan(t),1,0,0,0,0,1,0,0,0,0,1]):this.identity()},perspective:function(t){return t=-1/t,[1,0,0,0,0,1,0,0,0,0,1,t,0,0,0,1]},parse:function(t){var i=t.match(/\((.+)\)/)[1].split(/,\s?/);return 6===i.length&&(i.splice(2,0,"0","0"),i.splice(6,0,"0","0"),i.splice(8,0,"0","0","1","0"),i.push("0","1")),i},inverse:function(t){var i=this.identity(),n=t[5]*t[10]-t[6]*t[9],e=t[1]*t[10]-t[2]*t[9],r=t[1]*t[6]-t[2]*t[5],s=t[4]*t[10]-t[6]*t[8],a=t[0]*t[10]-t[2]*t[8],o=t[0]*t[6]-t[2]*t[4],u=t[4]*t[9]-t[5]*t[8],h=t[0]*t[9]-t[1]*t[8],c=t[0]*t[5]-t[1]*t[4],p=1/(t[0]*n-t[1]*s+t[2]*u);return i[0]=p*n,i[1]=-p*e,i[2]=p*r,i[4]=-p*s,i[5]=p*a,i[6]=-p*o,i[8]=p*u,i[9]=-p*h,i[10]=p*c,i[12]=-t[12]*i[0]-t[13]*i[4]-t[14]*i[8],i[13]=-t[12]*i[1]-t[13]*i[5]-t[14]*i[9],i[14]=-t[12]*i[2]-t[13]*i[6]-t[14]*i[10],i},compose:function(t,i,n){t||(t=[]),i||(i=[]),n||(n=[]);var e=this.rotate(i[0],i[1],i[2]);return n.length&&(e[0]*=n[0],e[1]*=n[0],e[2]*=n[0],e[4]*=n[1],e[5]*=n[1],e[6]*=n[1],e[8]*=n[2],e[9]*=n[2],e[10]*=n[2]),t.length&&(e[12]=t[0],e[13]=t[1],e[14]=t[2]),e},decompose:function(t){var i=M.length(t[0],t[1],t[2]),n=M.length(t[4],t[5],t[6]),e=M.length(t[8],t[9],t[10]),r=Math.atan2(-t[9]/e,t[10]/e)/z,s=Math.asin(t[8]/e)/z,a=Math.atan2(-t[4]/n,t[0]/i)/z;(1===t[4]||-1===t[4])&&(r=0,s=t[4]*-Math.PI/2,a=t[4]*Math.atan2(t[6]/n,t[5]/n)/z);var o=t[12],u=t[13],h=t[14];return{translate:[o,u,h],rotate:[r,s,a],scale:[i,n,e]}},transpose:function(t){var i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,t},lookAt:function(t,i,n){var e=M.sub(t,i);e=M.norm(e),0===M.length(e)&&(e[2]=1);var r=M.cross(n,e);0===M.length(r)&&(e[0]+=1e-4,r=M.norm(M.cross(n,e)));var s=M.cross(e,r),a=this.identity();return a[0]=r[0],a[1]=r[1],a[2]=r[2],a[4]=s[0],a[5]=s[1],a[6]=s[2],a[8]=e[0],a[9]=e[1],a[10]=e[2],a},stringify:function(t){for(var i=0;t.length>i;++i)1e-6>Math.abs(t[i])&&(t[i]=0);return"matrix3d("+t.join()+")"}};h.prototype=new n,h.prototype.constructor=h,h.prototype.init=function(){this.runner=new a(this),this.running=!0,this.state={translate:[0,0,0],rotate:[0,0,0],scale:[1,1,1],opacity:1}},h.prototype.update=function(t){this.runner.run(t),this.style()},h.prototype.timeline=function(t){this.clear(),this.runner.seek(t),this.style()},h.prototype.pause=function(){this.running&&(this.runner.pause(),this.running=!1)},h.prototype.resume=function(){this.running||(this.runner.resume(),this.running=!0)},h.prototype.style=function(){this.dom.style[v]=this.transform(),this.dom.style.opacity=this.opacity()},h.prototype.transform=function(){return A.stringify(this.matrix())},h.prototype.matrix=function(){var t=this.state;return A.compose(t.translate,t.rotate,t.scale)},h.prototype.center=function(){return A.decompose(A.inverse(this.matrix()))},h.prototype.lookAt=function(t){var i=A.decompose(A.lookAt(t,this.state.translate,[0,1,0]));this.state.rotate=i.rotate},h.prototype.opacity=function(){return this.state.opacity},h.prototype.add=function(t,i){return this.state[t][0]+=i[0],this.state[t][1]+=i[1],this.state[t][2]+=i[2],this},h.prototype.set=function(t,i){return this.state[t]=i,this},h.prototype.translate=function(t){return this.add("translate",t)},h.prototype.rotate=function(t){return this.add("rotate",t)},h.prototype.scale=function(t){return this.add("scale",t)},h.prototype.clear=function(){this.state.translate=[0,0,0],this.state.rotate=[0,0,0],this.state.scale=[1,1,1],this.state.opacity=1},h.prototype.animate=function(t,i,n,e){return this.runner.add(t,i,n,e),this.runner},h.prototype.finish=function(t){return this.runner.end(t),this},h.prototype.stop=function(){return this.finish(!0)},h.prototype.css=function(t){return new i(this,this.animations,t)}})();
//@ sourceMappingURL=anima.min.js.map